<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/a79b854f30af352b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/13e4f074de4f4451.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/8d97c73ce69220db.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/9526220685838278.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/d812d1d5675615d9.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-6bbf180f727cbf92.js"/><script src="/_next/static/chunks/4bd1b696-d4d5eb693d0a7af9.js" async=""></script><script src="/_next/static/chunks/684-2b3410e2d5e826b0.js" async=""></script><script src="/_next/static/chunks/main-app-32d544d6a28ca166.js" async=""></script><script src="/_next/static/chunks/870fdd6f-f1fef985ed622ec8.js" async=""></script><script src="/_next/static/chunks/874-fee5c5fe0f63a060.js" async=""></script><script src="/_next/static/chunks/63-be211eb92833b4d3.js" async=""></script><script src="/_next/static/chunks/489-ab6b13dccd3de2c5.js" async=""></script><script src="/_next/static/chunks/app/chess/about/page-2f3f41cfc2a45d22.js" async=""></script><title>Elijah Cirioli</title><meta name="description" content="A portfolio of some of my javascript projects"/><meta property="og:title" content="elijahcirioli.com"/><meta property="og:description" content="A portfolio of some of my javascript projects"/><meta property="og:url" content="https://elijahcirioli.com"/><meta property="og:image" content="https://elijahcirioli.com/landing/thumbnails/open_graph_thumbnail.png"/><meta property="og:image:alt" content="Preview image for elijahcirioli.com"/><meta property="og:image:width" content="1718"/><meta property="og:image:height" content="1278"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="elijahcirioli.com"/><meta name="twitter:description" content="A portfolio of some of my javascript projects"/><meta name="twitter:image" content="https://elijahcirioli.com/landing/thumbnails/open_graph_thumbnail.png"/><meta name="twitter:image:alt" content="Preview image for elijahcirioli.com"/><meta name="twitter:image:width" content="1718"/><meta name="twitter:image:height" content="1278"/><link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png" sizes="180x180"/><link rel="icon" href="/favicon/favicon-32x32.png" sizes="32x32" type="image/png"/><link rel="icon" href="/favicon/favicon-16x16.png" sizes="16x16" type="image/png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_4bc053"><header id="Header_header__b54d9"><div id="HeaderNavBar_headerNavBar__4sI8g"><a id="HeaderNavBar_logo__hiHbA" href="/"><img alt="Elijah Cirioli logo" loading="lazy" width="100" height="57" decoding="async" data-nimg="1" style="color:transparent" src="/logo.png"/></a><div id="HeaderNavBar_settingsWrap__AYAIh"><div id="SettingsMenu_menu__8MNu4" class=""><button class="SettingsMenu_buttonColors___mYUg"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="gear" class="svg-inline--fa fa-gear " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"></path></svg></button><div class="SettingsMenu_connectingLine__aVsTB" style="height:0px;opacity:0"></div><div class="SettingsMenuItem_item__AeV8Y SettingsMenuItem_hidden__r_ynx" style="top:0px"><button><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path></svg></button><p>Enable dark mode</p></div><div class="SettingsMenuItem_item__AeV8Y SettingsMenuItem_hidden__r_ynx" style="top:0px"><button><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="eye-slash" class="svg-inline--fa fa-eye-slash " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"></path></svg></button><p>Reduce animations</p></div></div></div></div><h1 id="Header_title__T4REj" class="__className_db952b">elijah<span class="Header_greenText__MS_3t">cirioli</span></h1></header><main id="TextWrap_textWrap__9_kIy" class="__className_4bc053"><div id="TextWrap_titleWrap__HFi0_"><h1 class="__className_db952b">About Public Chess</h1><p>Spring 2021</p></div><hr/><p>A while back I teased a trilogy of chess-related projects and it seemed like implementing the game of chess itself was a good place to start. I had two main goals for this project: I wanted to see how hard it was to program chess, and I wanted to expand on what I did in<!-- --> <a href="/projects/vote/">Movie Ballot</a> where I implemented real time multiplayer using<!-- --> <a href="https://firebase.google.com/">Google Firebase.</a></p><p>The game of chess serves as a good exercise in object-oriented programming. I started by creating a generic Piece class that had a position and color as well as a few other variables. I defined all the other pieces as inheriting from that class and each one overwrote the getMoves() function. This allowed me to use polymorphism in the higher-level game logic to get the available moves for a given piece without actually caring what type of piece it was. I started by adding the basic moves for all the pieces, with many of them using a helper function to find all available moves in a given direction. I added a special case where the pawn was able to move two spaces based on whether it’s hasMoved flag was set to false. At the start of the game these pieces were all placed in a 2D array that represents the board.</p><p>I added a flag for whose turn it was and just like that I had a very rudimentary chess game implemented. From there things got progressively more complicated. My next steps were fairly easy things like capturing pieces, and I eventually moved on to check. To test if the current player was in check, I looked at all of the opponent’s possible moves and checked if any of them would capture the king. That was easy enough, but then I had to make sure that the player couldn’t put themselves into check. After the player clicked on a piece and generated the list of possible moves, I made several copies of the board and pretended to make each move. After making the move I ran the check test and if it came back true then I removed that move from the player’s list of options. This isn’t really the most efficient way to do this, I think I would be better off keeping track of all the squares that the opponent is currently able to attack and using that to figure out check, but this worked well enough.</p><p>From here I added some special moves like castling and en passant, which all came with their own sets of special cases. As you get into the more complex chess rules, their interactions create many edge cases that you need to check, such as castling through check. The last big things to implement were checkmate which was a natural extension of the check system and promotion. It would be nice to have a UI that lets the user pick what they would like to promote their piece to but I didn’t really want to do that so in my version pawns always promote to queens. After I got all of these things working correctly it was just a matter of testing as many edge cases as I could think of. I haven’t tested enough to be 100% sure but I think I have everything working as it should.</p><p>Now it was time to move on to the multiplayer aspect of this. In Movie Ballot I experimented with using Google Firebase for a sort of peer-to-peer system with no central server logic. It’s not actually peer to peer in the sense that there is a central database, but the logic is calculated by the clients and shared among themselves. I will again say that this is not a good way to implement multiplayer, but I thought it was very interesting and I wanted to see how far I could push it. I’ve been reading a lot about WebSockets lately and they seem surprisingly easy so I will probably make something soon with more traditional multiplayer.</p><p>Firebase is a non-relational database so it acts essentially like a big json object. I have a lot of extra bits of information stored in this database such as timestamps and hidden user ids, but the core of the data structure is that I have an array of games, which each have an array of turns. Each of these turns stores what color it is, and an array of every piece still on the board. This is not like the 2D array that’s used in the game logic, but rather just a list of each piece which has an x and y coordinate stored with it along with a type, color, and whether it has moved. The state of a chess game is commonly represented using<!-- --> <a href="https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation">Forsyth-Edwards Notation</a>. This is nice for many reasons, especially because it is fairly concise, but I chose not to use it here. I would rather use the hierarchical json structure that I have access to rather than encoding everything as characters in a string. FEN does store a lot of the same information such as who can still castle and where, but it is encoded in a pretty arbitrary way. If I do this all again I may go through the trouble of implementing a FEN encoder and decoder, but I wasn’t that concerned with efficiency when I made this and I was able to pretty much upload my existing data structure directly to the database which was pretty nice.</p><p>One of the best things about Firebase is that you can set up listeners to trigger events when the database is updated. This allows multiple people to play with each other in real time without having to ping the database periodically. The client listens for when anyone else updates the game state, and it adjusts the client’s view accordingly. I added a lot of UI features to let the users navigate through this database, looking at previous moves and previous games. Every move of every game is stored forever which isn’t a big deal for this since no one really uses it, but if this was popular that could eventually become an issue.</p><p>I think the user interface came out pretty well. There is a bit of a clash between the square and rounded elements, but the use of animation and shadows is pretty nice in my opinion. The art for the pieces is the same<!-- --> <a href="https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces">Wikimedia Commons chess pieces</a> <!-- -->that are used in all sorts of places. I’d love to make my own set at some point but I don’t have the artistic skill for that just yet. Towards the end of the project I figured that it would be nice to have a chat feature to make the game feel a little bit less lonely. This didn’t use the same Realtime Database, but instead Cloud Firestore. This turned out to be incredibly easy to implement, although it should be noted it’s not secure in any way at all. Messages get deleted after 12 hours but in that time anyone can view them. I think I know how I could do a lot of security stuff, but if I want to keep this as something that doesn’t require any kind of sign on at all then I think it’s impossible.</p><p>I’m pretty pleased with how this project came out, and I think it’s a much more refined (albeit less ambitious) use of Firebase than Movie Ballot. A decent number of people have made suggestions for it, but they all push it towards being just a worse version of lichess. I know there’s nothing competitive about this, that’s the point. It’s just supposed to be a casual thing where you can drop in and play a few moves when you’re bored. For that purpose I think it does a good job.</p></main><!--$--><!--/$--><!--$--><!--/$--><footer class="Footer_footer__PyJc9"><p>©<!-- -->2025<!-- --> Elijah Cirioli</p><a class="Footer_link__Drk1j" href="/">Portfolio</a><a class="Footer_link__Drk1j" target="_blank" href="https://github.com/ElijahCirioli">GitHub</a><a class="Footer_link__Drk1j" target="_blank" href="https://www.linkedin.com/in/elijah-cirioli-591a3920b/">LinkedIn</a><a class="Footer_link__Drk1j" target="_blank" href="/landing/Elijah_Cirioli_Resume.pdf">Résumé</a><a class="Footer_link__Drk1j" href="mailto:contact@elijahcirioli.com">Email</a><a class="Footer_link__Drk1j" target="_blank" href="https://www.etsy.com/shop/elijahciriolidotcom">Store</a></footer><script src="/_next/static/chunks/webpack-6bbf180f727cbf92.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[7555,[],\"\"]\n3:I[1295,[],\"\"]\n4:I[6874,[\"266\",\"static/chunks/870fdd6f-f1fef985ed622ec8.js\",\"874\",\"static/chunks/874-fee5c5fe0f63a060.js\",\"63\",\"static/chunks/63-be211eb92833b4d3.js\",\"489\",\"static/chunks/489-ab6b13dccd3de2c5.js\",\"803\",\"static/chunks/app/chess/about/page-2f3f41cfc2a45d22.js\"],\"\"]\n5:I[3063,[\"266\",\"static/chunks/870fdd6f-f1fef985ed622ec8.js\",\"874\",\"static/chunks/874-fee5c5fe0f63a060.js\",\"63\",\"static/chunks/63-be211eb92833b4d3.js\",\"489\",\"static/chunks/489-ab6b13dccd3de2c5.js\",\"803\",\"static/chunks/app/chess/about/page-2f3f41cfc2a45d22.js\"],\"Image\"]\n6:I[3676,[\"266\",\"static/chunks/870fdd6f-f1fef985ed622ec8.js\",\"874\",\"static/chunks/874-fee5c5fe0f63a060.js\",\"63\",\"static/chunks/63-be211eb92833b4d3.js\",\"489\",\"static/chunks/489-ab6b13dccd3de2c5.js\",\"803\",\"static/chunks/app/chess/about/page-2f3f41cfc2a45d22.js\"],\"default\"]\n7:I[9665,[],\"MetadataBoundary\"]\n9:I[9665,[],\"OutletBoundary\"]\nc:I[4911,[],\"AsyncMetadataOutlet\"]\ne:I[9665,[],\"ViewportBoundary\"]\n10:I[6614,[],\"\"]\n:HL[\"/_next/static/css/a79b854f30af352b.css\",\"style\"]\n:HL[\"/_next/static/css/13e4f074de4f4451.css\",\"style\"]\n:HL[\"/_next/static/css/8d97c73ce69220db.css\",\"style\"]\n:HL[\"/_next/static/css/9526220685838278.css\",\"style\"]\n:HL[\"/_next/static/css/d812d1d5675615d9.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"a0IafvTm7kca6bhDJ8EOl\",\"p\":\"\",\"c\":[\"\",\"chess\",\"about\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"chess\",{\"children\":[\"about\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a79b854f30af352b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_4bc053\",\"children\":[[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}],[\"$\",\"footer\",null,{\"className\":\"Footer_footer__PyJc9\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"©\",2025,\" Elijah Cirioli\"]}],[\"$\",\"$L4\",null,{\"className\":\"Footer_link__Drk1j\",\"href\":\"/\",\"children\":\"Portfolio\"}],[\"$\",\"$L4\",null,{\"className\":\"Footer_link__Drk1j\",\"href\":\"https://github.com/ElijahCirioli\",\"target\":\"_blank\",\"children\":\"GitHub\"}],[\"$\",\"$L4\",null,{\"className\":\"Footer_link__Drk1j\",\"href\":\"https://www.linkedin.com/in/elijah-cirioli-591a3920b/\",\"target\":\"_blank\",\"children\":\"LinkedIn\"}],[\"$\",\"$L4\",null,{\"className\":\"Footer_link__Drk1j\",\"href\":\"/landing/Elijah_Cirioli_Resume.pdf\",\"target\":\"_blank\",\"children\":\"Résumé\"}],[\"$\",\"$L4\",null,{\"className\":\"Footer_link__Drk1j\",\"href\":\"mailto:contact@elijahcirioli.com\",\"children\":\"Email\"}],[\"$\",\"$L4\",null,{\"className\":\"Footer_link__Drk1j\",\"href\":\"https://www.etsy.com/shop/elijahciriolidotcom\",\"target\":\"_blank\",\"children\":\"Store\"}]]}]]}]}]]}],{\"children\":[\"chess\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"about\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L2\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L3\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"header\",null,{\"id\":\"Header_header__b54d9\",\"children\":[[\"$\",\"div\",null,{\"id\":\"HeaderNavBar_headerNavBar__4sI8g\",\"children\":[[\"$\",\"$L4\",null,{\"href\":\"/\",\"id\":\"HeaderNavBar_logo__hiHbA\",\"children\":[\"$\",\"$L5\",null,{\"src\":\"/logo.png\",\"alt\":\"Elijah Cirioli logo\",\"width\":100,\"height\":57}]}],[\"$\",\"div\",null,{\"id\":\"HeaderNavBar_settingsWrap__AYAIh\",\"children\":[\"$\",\"$L6\",null,{}]}]]}],[\"$\",\"h1\",null,{\"id\":\"Header_title__T4REj\",\"className\":\"__className_db952b\",\"children\":[\"elijah\",[\"$\",\"span\",null,{\"className\":\"Header_greenText__MS_3t\",\"children\":\"cirioli\"}]]}]]}],[\"$\",\"main\",null,{\"id\":\"TextWrap_textWrap__9_kIy\",\"className\":\"__className_4bc053\",\"children\":[[\"$\",\"div\",null,{\"id\":\"TextWrap_titleWrap__HFi0_\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"__className_db952b\",\"children\":\"About Public Chess\"}],[\"$\",\"p\",null,{\"children\":\"Spring 2021\"}]]}],[\"$\",\"hr\",null,{}],[[\"$\",\"p\",null,{\"children\":[\"A while back I teased a trilogy of chess-related projects and it seemed like implementing the game of chess itself was a good place to start. I had two main goals for this project: I wanted to see how hard it was to program chess, and I wanted to expand on what I did in\",\" \",[\"$\",\"a\",null,{\"href\":\"/projects/vote/\",\"children\":\"Movie Ballot\"}],\" where I implemented real time multiplayer using\",\" \",[\"$\",\"a\",null,{\"href\":\"https://firebase.google.com/\",\"children\":\"Google Firebase.\"}]]}],[\"$\",\"p\",null,{\"children\":\"The game of chess serves as a good exercise in object-oriented programming. I started by creating a generic Piece class that had a position and color as well as a few other variables. I defined all the other pieces as inheriting from that class and each one overwrote the getMoves() function. This allowed me to use polymorphism in the higher-level game logic to get the available moves for a given piece without actually caring what type of piece it was. I started by adding the basic moves for all the pieces, with many of them using a helper function to find all available moves in a given direction. I added a special case where the pawn was able to move two spaces based on whether it’s hasMoved flag was set to false. At the start of the game these pieces were all placed in a 2D array that represents the board.\"}],[\"$\",\"p\",null,{\"children\":\"I added a flag for whose turn it was and just like that I had a very rudimentary chess game implemented. From there things got progressively more complicated. My next steps were fairly easy things like capturing pieces, and I eventually moved on to check. To test if the current player was in check, I looked at all of the opponent’s possible moves and checked if any of them would capture the king. That was easy enough, but then I had to make sure that the player couldn’t put themselves into check. After the player clicked on a piece and generated the list of possible moves, I made several copies of the board and pretended to make each move. After making the move I ran the check test and if it came back true then I removed that move from the player’s list of options. This isn’t really the most efficient way to do this, I think I would be better off keeping track of all the squares that the opponent is currently able to attack and using that to figure out check, but this worked well enough.\"}],[\"$\",\"p\",null,{\"children\":\"From here I added some special moves like castling and en passant, which all came with their own sets of special cases. As you get into the more complex chess rules, their interactions create many edge cases that you need to check, such as castling through check. The last big things to implement were checkmate which was a natural extension of the check system and promotion. It would be nice to have a UI that lets the user pick what they would like to promote their piece to but I didn’t really want to do that so in my version pawns always promote to queens. After I got all of these things working correctly it was just a matter of testing as many edge cases as I could think of. I haven’t tested enough to be 100% sure but I think I have everything working as it should.\"}],[\"$\",\"p\",null,{\"children\":\"Now it was time to move on to the multiplayer aspect of this. In Movie Ballot I experimented with using Google Firebase for a sort of peer-to-peer system with no central server logic. It’s not actually peer to peer in the sense that there is a central database, but the logic is calculated by the clients and shared among themselves. I will again say that this is not a good way to implement multiplayer, but I thought it was very interesting and I wanted to see how far I could push it. I’ve been reading a lot about WebSockets lately and they seem surprisingly easy so I will probably make something soon with more traditional multiplayer.\"}],[\"$\",\"p\",null,{\"children\":[\"Firebase is a non-relational database so it acts essentially like a big json object. I have a lot of extra bits of information stored in this database such as timestamps and hidden user ids, but the core of the data structure is that I have an array of games, which each have an array of turns. Each of these turns stores what color it is, and an array of every piece still on the board. This is not like the 2D array that’s used in the game logic, but rather just a list of each piece which has an x and y coordinate stored with it along with a type, color, and whether it has moved. The state of a chess game is commonly represented using\",\" \",[\"$\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation\",\"children\":\"Forsyth-Edwards Notation\"}],\". This is nice for many reasons, especially because it is fairly concise, but I chose not to use it here. I would rather use the hierarchical json structure that I have access to rather than encoding everything as characters in a string. FEN does store a lot of the same information such as who can still castle and where, but it is encoded in a pretty arbitrary way. If I do this all again I may go through the trouble of implementing a FEN encoder and decoder, but I wasn’t that concerned with efficiency when I made this and I was able to pretty much upload my existing data structure directly to the database which was pretty nice.\"]}],[\"$\",\"p\",null,{\"children\":\"One of the best things about Firebase is that you can set up listeners to trigger events when the database is updated. This allows multiple people to play with each other in real time without having to ping the database periodically. The client listens for when anyone else updates the game state, and it adjusts the client’s view accordingly. I added a lot of UI features to let the users navigate through this database, looking at previous moves and previous games. Every move of every game is stored forever which isn’t a big deal for this since no one really uses it, but if this was popular that could eventually become an issue.\"}],[\"$\",\"p\",null,{\"children\":[\"I think the user interface came out pretty well. There is a bit of a clash between the square and rounded elements, but the use of animation and shadows is pretty nice in my opinion. The art for the pieces is the same\",\" \",[\"$\",\"a\",null,{\"href\":\"https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces\",\"children\":\"Wikimedia Commons chess pieces\"}],\" \",\"that are used in all sorts of places. I’d love to make my own set at some point but I don’t have the artistic skill for that just yet. Towards the end of the project I figured that it would be nice to have a chat feature to make the game feel a little bit less lonely. This didn’t use the same Realtime Database, but instead Cloud Firestore. This turned out to be incredibly easy to implement, although it should be noted it’s not secure in any way at all. Messages get deleted after 12 hours but in that time anyone can view them. I think I know how I could do a lot of security stuff, but if I want to keep this as something that doesn’t require any kind of sign on at all then I think it’s impossible.\"]}],[\"$\",\"p\",null,{\"children\":\"I’m pretty pleased with how this project came out, and I think it’s a much more refined (albeit less ambitious) use of Firebase than Movie Ballot. A decent number of people have made suggestions for it, but they all push it towards being just a worse version of lichess. I know there’s nothing competitive about this, that’s the point. It’s just supposed to be a casual thing where you can drop in and play a few moves when you’re bored. For that purpose I think it does a good job.\"}]]]}]],[\"$\",\"$L7\",null,{\"children\":\"$L8\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/13e4f074de4f4451.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8d97c73ce69220db.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/9526220685838278.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d812d1d5675615d9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L9\",null,{\"children\":[\"$La\",\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"dklXyW5paDwLjmP_qeT0r\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:\"$Sreact.suspense\"\n12:I[4911,[],\"AsyncMetadata\"]\n8:[\"$\",\"$11\",null,{\"fallback\":null,\"children\":[\"$\",\"$L12\",null,{\"promise\":\"$@13\"}]}]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\na:null\n"])</script><script>self.__next_f.push([1,"13:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Elijah Cirioli\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"A portfolio of some of my javascript projects\"}],[\"$\",\"meta\",\"2\",{\"property\":\"og:title\",\"content\":\"elijahcirioli.com\"}],[\"$\",\"meta\",\"3\",{\"property\":\"og:description\",\"content\":\"A portfolio of some of my javascript projects\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:url\",\"content\":\"https://elijahcirioli.com\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:image\",\"content\":\"https://elijahcirioli.com/landing/thumbnails/open_graph_thumbnail.png\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:image:alt\",\"content\":\"Preview image for elijahcirioli.com\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image:width\",\"content\":\"1718\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image:height\",\"content\":\"1278\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:title\",\"content\":\"elijahcirioli.com\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:description\",\"content\":\"A portfolio of some of my javascript projects\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:image\",\"content\":\"https://elijahcirioli.com/landing/thumbnails/open_graph_thumbnail.png\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:image:alt\",\"content\":\"Preview image for elijahcirioli.com\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image:width\",\"content\":\"1718\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:image:height\",\"content\":\"1278\"}],[\"$\",\"link\",\"17\",{\"rel\":\"apple-touch-icon\",\"href\":\"/favicon/apple-touch-icon.png\",\"sizes\":\"180x180\"}],[\"$\",\"link\",\"18\",{\"rel\":\"icon\",\"href\":\"/favicon/favicon-32x32.png\",\"sizes\":\"32x32\",\"type\":\"image/png\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/favicon/favicon-16x16.png\",\"sizes\":\"16x16\",\"type\":\"image/png\"}],[\"$\",\"link\",\"20\",{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",\"21\",{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#5bbad5\"}]],\"error\":null,\"digest\":\"$undefined\"}\nd:{\"metadata\":\"$13:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>